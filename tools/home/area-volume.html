<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>面积体积计算器 - 生活计算宝典</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../layout.css">
    <link rel="stylesheet" href="../../components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="../../favicon.ico" type="image/x-icon">
</head>
<body class="app">
    <header class="app-header">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-mobile">
                    <a href="../../pages/home.html" class="navbar-back">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <div class="navbar-title">面积体积计算</div>
                    <div></div>
                </div>
                
                <div class="navbar-desktop">
                    <a href="../../index.html" class="logo">
                        <i class="fas fa-calculator"></i>
                        <span class="logo-text">生活计算宝典</span>
                    </a>
                    <div class="nav-links">
                        <a href="../../index.html" class="nav-link">首页</a>
                        <a href="../../pages/home.html" class="nav-link">居家生活</a>
                        <a href="../../pages/finance.html" class="nav-link">理财金融</a>
                        <a href="../../pages/tools.html" class="nav-link">所有工具</a>
                    </div>
                    <div class="theme-toggle">
                        <button class="theme-btn" aria-label="切换主题">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="app-main">
        <section class="section">
            <div class="container">
                <!-- 面包屑导航 -->
                <nav class="breadcrumb">
                    <a href="../../index.html" class="breadcrumb-link">首页</a>
                    <span class="breadcrumb-divider"><i class="fas fa-chevron-right"></i></span>
                    <a href="../../pages/home.html" class="breadcrumb-link">居家生活</a>
                    <span class="breadcrumb-divider"><i class="fas fa-chevron-right"></i></span>
                    <span class="breadcrumb-current">面积体积计算</span>
                </nav>
                
                <div class="calculator-layout">
                    <!-- 侧边栏 - 图形选择 -->
                    <div class="calculator-sidebar">
                        <div class="calculator-card">
                            <h3 class="calculator-title mb-4">选择图形</h3>
                            
                            <div class="tabs">
                                <button class="tab active" data-tab="area">面积计算</button>
                                <button class="tab" data-tab="volume">体积计算</button>
                                <button class="tab" data-tab="room">房间计算</button>
                            </div>
                            
                            <!-- 面积图形选择 -->
                            <div id="area-tab" class="tab-content active">
                                <div class="shape-grid">
                                    <div class="shape-card" data-shape="rectangle" data-type="area">
                                        <div class="shape-icon">
                                            <i class="fas fa-square-full"></i>
                                        </div>
                                        <div class="shape-name">矩形</div>
                                    </div>
                                    <div class="shape-card" data-shape="triangle" data-type="area">
                                        <div class="shape-icon">
                                            <i class="fas fa-play"></i>
                                        </div>
                                        <div class="shape-name">三角形</div>
                                    </div>
                                    <div class="shape-card" data-shape="circle" data-type="area">
                                        <div class="shape-icon">
                                            <i class="fas fa-circle"></i>
                                        </div>
                                        <div class="shape-name">圆形</div>
                                    </div>
                                    <div class="shape-card" data-shape="trapezoid" data-type="area">
                                        <div class="shape-icon">
                                            <i class="fas fa-shapes"></i>
                                        </div>
                                        <div class="shape-name">梯形</div>
                                    </div>
                                    <div class="shape-card" data-shape="square" data-type="area">
                                        <div class="shape-icon">
                                            <i class="fas fa-square"></i>
                                        </div>
                                        <div class="shape-name">正方形</div>
                                    </div>
                                    <div class="shape-card" data-shape="ellipse" data-type="area">
                                        <div class="shape-icon">
                                            <i class="fas fa-egg"></i>
                                        </div>
                                        <div class="shape-name">椭圆形</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 体积图形选择 -->
                            <div id="volume-tab" class="tab-content">
                                <div class="shape-grid">
                                    <div class="shape-card" data-shape="cuboid" data-type="volume">
                                        <div class="shape-icon">
                                            <i class="fas fa-cube"></i>
                                        </div>
                                        <div class="shape-name">长方体</div>
                                    </div>
                                    <div class="shape-card" data-shape="cylinder" data-type="volume">
                                        <div class="shape-icon">
                                            <i class="fas fa-database"></i>
                                        </div>
                                        <div class="shape-name">圆柱体</div>
                                    </div>
                                    <div class="shape-card" data-shape="sphere" data-type="volume">
                                        <div class="shape-icon">
                                            <i class="fas fa-globe"></i>
                                        </div>
                                        <div class="shape-name">球体</div>
                                    </div>
                                    <div class="shape-card" data-shape="cone" data-type="volume">
                                        <div class="shape-icon">
                                            <i class="fas fa-ice-cream"></i>
                                        </div>
                                        <div class="shape-name">圆锥体</div>
                                    </div>
                                    <div class="shape-card" data-shape="pyramid" data-type="volume">
                                        <div class="shape-icon">
                                            <i class="fas fa-gem"></i>
                                        </div>
                                        <div class="shape-name">棱锥体</div>
                                    </div>
                                    <div class="shape-card" data-shape="prism" data-type="volume">
                                        <div class="shape-icon">
                                            <i class="fas fa-shapes"></i>
                                        </div>
                                        <div class="shape-name">棱柱体</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 房间计算选项 -->
                            <div id="room-tab" class="tab-content">
                                <div class="room-options">
                                    <div class="room-type active" data-room="simple">
                                        <div class="room-type-icon">
                                            <i class="fas fa-home"></i>
                                        </div>
                                        <div class="room-type-content">
                                            <h4>简单房间</h4>
                                            <p>计算矩形房间面积，可扣除门窗</p>
                                        </div>
                                    </div>
                                    <div class="room-type" data-room="lshape">
                                        <div class="room-type-icon">
                                            <i class="fas fa-project-diagram"></i>
                                        </div>
                                        <div class="room-type-content">
                                            <h4>L形房间</h4>
                                            <p>计算L形不规则房间面积</p>
                                        </div>
                                    </div>
                                    <div class="room-type" data-room="volume">
                                        <div class="room-type-icon">
                                            <i class="fas fa-building"></i>
                                        </div>
                                        <div class="room-type-content">
                                            <h4>房间体积</h4>
                                            <p>计算房间体积，用于空调容量计算</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 主内容区 - 计算器 -->
                    <div class="calculator-main">
                        <div class="calculator-card">
                            <div class="calculator-header">
                                <h1 class="calculator-title" id="currentShape">矩形面积计算</h1>
                                <p class="calculator-description" id="shapeDescription">
                                    计算矩形的面积。输入长度和宽度，系统将自动计算面积。
                                </p>
                            </div>
                            
                            <!-- 图形预览 -->
                            <div class="shape-preview">
                                <div class="shape-diagram" id="shapeDiagram">
                                    <!-- 图形将通过SVG动态生成 -->
                                    <svg width="200" height="150" viewBox="0 0 200 150" id="shapeSVG">
                                        <!-- 矩形 -->
                                        <rect x="30" y="30" width="140" height="90" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                                        <text x="100" y="30" text-anchor="middle" dy="-10" fill="var(--text-secondary)" font-size="12">长度</text>
                                        <text x="180" y="75" text-anchor="middle" fill="var(--text-secondary)" font-size="12">宽度</text>
                                        <line x1="30" y1="30" x2="170" y2="30" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                                        <line x1="170" y1="30" x2="170" y2="120" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                                    </svg>
                                </div>
                                <div class="shape-formula" id="shapeFormula">
                                    <strong>公式：</strong> A = 长度 × 宽度
                                </div>
                            </div>
                            
                            <!-- 输入区域 -->
                            <div class="input-area" id="inputArea">
                                <!-- 矩形输入字段 -->
                                <div class="input-group">
                                    <label class="input-label">长度 (单位)</label>
                                    <input type="number" id="length" class="input-field" placeholder="例如：5" min="0" step="0.01" value="5">
                                </div>
                                
                                <div class="input-group">
                                    <label class="input-label">宽度 (单位)</label>
                                    <input type="number" id="width" class="input-field" placeholder="例如：3" min="0" step="0.01" value="3">
                                </div>
                                
                                <!-- 单位选择 -->
                                <div class="input-group">
                                    <label class="input-label">单位</label>
                                    <select id="unit" class="input-field">
                                        <option value="m">米 (m)</option>
                                        <option value="cm">厘米 (cm)</option>
                                        <option value="mm">毫米 (mm)</option>
                                        <option value="ft">英尺 (ft)</option>
                                        <option value="in">英寸 (in)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- 计算按钮 -->
                            <button class="btn btn-primary btn-block calc-btn" id="calculateBtn">
                                <i class="fas fa-calculator"></i> 计算
                            </button>
                            
                            <!-- 结果展示 -->
                            <div class="result-display" id="resultSection">
                                <h3 class="result-title"><i class="fas fa-chart-bar"></i> 计算结果</h3>
                                <div class="result-grid">
                                    <div class="result-item">
                                        <span class="result-label">面积</span>
                                        <span class="result-value" id="areaResult">15.00 平方米</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">周长</span>
                                        <span class="result-value" id="perimeterResult">16.00 米</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">对角线长度</span>
                                        <span class="result-value" id="diagonalResult">5.83 米</span>
                                    </div>
                                </div>
                                
                                <!-- 单位换算 -->
                                <div class="unit-conversion" id="unitConversion" style="margin-top: 1.5rem;">
                                    <h4 class="result-title" style="font-size: 1rem;">单位换算</h4>
                                    <div class="result-grid">
                                        <div class="result-item">
                                            <span class="result-label">平方厘米</span>
                                            <span class="result-value" id="cm2Result">150,000.00 cm²</span>
                                        </div>
                                        <div class="result-item">
                                            <span class="result-label">平方毫米</span>
                                            <span class="result-value" id="mm2Result">15,000,000.00 mm²</span>
                                        </div>
                                        <div class="result-item">
                                            <span class="result-label">平方英尺</span>
                                            <span class="result-value" id="ft2Result">161.46 ft²</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 使用说明 -->
                        <div class="alert alert-info mt-6">
                            <div class="flex items-center">
                                <i class="fas fa-lightbulb mr-3"></i>
                                <div>
                                    <strong>使用说明：</strong> 
                                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                        <li>选择左侧的图形类型（面积、体积或房间计算）</li>
                                        <li>点击具体图形，右侧会显示对应的输入字段</li>
                                        <li>输入尺寸数据，选择单位，点击"计算"按钮</li>
                                        <li>系统会实时计算并显示结果，包括单位换算</li>
                                        <li>对于房间计算，可以添加门窗进行面积扣除</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 常见房间面积参考 -->
                        <div class="reference-card mt-6">
                            <h3 class="result-title"><i class="fas fa-home"></i> 常见房间面积参考</h3>
                            <div class="result-grid mt-4">
                                <div class="result-item">
                                    <span class="result-label">卧室</span>
                                    <span class="result-value">9-15 平方米</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">客厅</span>
                                    <span class="result-value">15-30 平方米</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">厨房</span>
                                    <span class="result-value">6-12 平方米</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">卫生间</span>
                                    <span class="result-value">3-8 平方米</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <a href="../../index.html" class="footer-logo">
                        <i class="fas fa-calculator"></i>
                        <span>生活计算宝典</span>
                    </a>
                    <p class="footer-description">
                        一站式离线计算工具集合，为您的生活带来便利。
                    </p>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-heading">居家工具</h4>
                    <a href="utility-bill.html" class="footer-link">水电费计算</a>
                    <a href="area-volume.html" class="footer-link active">面积体积计算</a>
                    <a href="paint-calc.html" class="footer-link">涂料用量计算</a>
                    <a href="cooking-convert.html" class="footer-link">食材换算</a>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-heading">快速链接</h4>
                    <a href="../../pages/home.html" class="footer-link">返回居家生活</a>
                    <a href="../../pages/tools.html" class="footer-link">所有工具</a>
                    <a href="https://github.com/laddzhao/life-calculators" target="_blank" class="footer-link">GitHub项目</a>
                    <a href="../../404.html" class="footer-link">404页面</a>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-heading">其他工具</h4>
                    <a href="../shopping/discount.html" class="footer-link">折扣计算器</a>
                    <a href="../finance/interest.html" class="footer-link">利息计算器</a>
                    <a href="../health/bmi.html" class="footer-link">BMI计算</a>
                    <a href="../professional/mortgage.html" class="footer-link">房贷计算器</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 生活计算宝典 · 面积体积计算器</p>
            </div>
        </div>
    </footer>

    <!-- 移动端底部导航 -->
    <nav class="mobile-bottom-nav">
        <a href="../../index.html" class="nav-item">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">首页</span>
        </a>
        <a href="../../pages/shopping.html" class="nav-item">
            <i class="fas fa-shopping-cart nav-icon"></i>
            <span class="nav-label">购物</span>
        </a>
        <a href="../../pages/home.html" class="nav-item active">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">居家</span>
        </a>
        <a href="../../pages/tools.html" class="nav-item">
            <i class="fas fa-th nav-icon"></i>
            <span class="nav-label">全部</span>
        </a>
        <a href="#" class="nav-item" id="mobileMenuBtn">
            <i class="fas fa-ellipsis-h nav-icon"></i>
            <span class="nav-label">更多</span>
        </a>
    </nav>

    <script src="../../calculator.js"></script>
    <script>
        // 当前选中的图形
        let currentShape = {
            type: 'area',
            shape: 'rectangle',
            name: '矩形',
            description: '计算矩形的面积。输入长度和宽度，系统将自动计算面积。',
            formula: 'A = 长度 × 宽度'
        };
        
        // 单位转换系数
        const unitConversions = {
            m: { name: '米', toM: 1 },
            cm: { name: '厘米', toM: 0.01 },
            mm: { name: '毫米', toM: 0.001 },
            ft: { name: '英尺', toM: 0.3048 },
            in: { name: '英寸', toM: 0.0254 }
        };
        
        // 面积单位转换
        const areaUnitConversions = {
            m2: { name: '平方米', toM2: 1 },
            cm2: { name: '平方厘米', toM2: 0.0001 },
            mm2: { name: '平方毫米', toM2: 0.000001 },
            ft2: { name: '平方英尺', toM2: 0.092903 },
            in2: { name: '平方英寸', toM2: 0.00064516 }
        };
        
        // 体积单位转换
        const volumeUnitConversions = {
            m3: { name: '立方米', toM3: 1 },
            cm3: { name: '立方厘米', toM3: 0.000001 },
            mm3: { name: '立方毫米', toM3: 0.000000001 },
            ft3: { name: '立方英尺', toM3: 0.0283168 },
            in3: { name: '立方英寸', toM3: 0.0000163871 },
            L: { name: '升', toM3: 0.001 },
            mL: { name: '毫升', toM3: 0.000001 }
        };
        
        // 图形配置
        const shapeConfigs = {
            // 面积图形
            rectangle: {
                name: '矩形',
                description: '计算矩形的面积。输入长度和宽度，系统将自动计算面积。',
                formula: 'A = 长度 × 宽度',
                inputs: [
                    { id: 'length', label: '长度', placeholder: '例如：5', value: 5 },
                    { id: 'width', label: '宽度', placeholder: '例如：3', value: 3 }
                ],
                calculate: function(inputs, unit) {
                    const length = inputs.length * unitConversions[unit].toM;
                    const width = inputs.width * unitConversions[unit].toM;
                    
                    const area = length * width;
                    const perimeter = 2 * (length + width);
                    const diagonal = Math.sqrt(length * length + width * width);
                    
                    return { area, perimeter, diagonal };
                }
            },
            triangle: {
                name: '三角形',
                description: '计算三角形的面积。输入底边和高，系统将自动计算面积。',
                formula: 'A = (底边 × 高) ÷ 2',
                inputs: [
                    { id: 'base', label: '底边', placeholder: '例如：6', value: 6 },
                    { id: 'height', label: '高', placeholder: '例如：4', value: 4 }
                ],
                calculate: function(inputs, unit) {
                    const base = inputs.base * unitConversions[unit].toM;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const area = (base * height) / 2;
                    // 对于三角形，周长需要三边，这里简化计算
                    const perimeter = base * 3; // 假设等边三角形
                    const diagonal = 0; // 三角形没有对角线
                    
                    return { area, perimeter, diagonal };
                }
            },
            circle: {
                name: '圆形',
                description: '计算圆形的面积。输入半径，系统将自动计算面积和周长。',
                formula: 'A = π × 半径²',
                inputs: [
                    { id: 'radius', label: '半径', placeholder: '例如：3', value: 3 }
                ],
                calculate: function(inputs, unit) {
                    const radius = inputs.radius * unitConversions[unit].toM;
                    
                    const area = Math.PI * radius * radius;
                    const perimeter = 2 * Math.PI * radius;
                    const diagonal = 2 * radius; // 直径
                    
                    return { area, perimeter, diagonal };
                }
            },
            trapezoid: {
                name: '梯形',
                description: '计算梯形的面积。输入上底、下底和高，系统将自动计算面积。',
                formula: 'A = (上底 + 下底) × 高 ÷ 2',
                inputs: [
                    { id: 'top', label: '上底', placeholder: '例如：4', value: 4 },
                    { id: 'bottom', label: '下底', placeholder: '例如：6', value: 6 },
                    { id: 'height', label: '高', placeholder: '例如：5', value: 5 }
                ],
                calculate: function(inputs, unit) {
                    const top = inputs.top * unitConversions[unit].toM;
                    const bottom = inputs.bottom * unitConversions[unit].toM;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const area = (top + bottom) * height / 2;
                    // 简化计算周长（假设等腰梯形）
                    const side = Math.sqrt(height * height + Math.pow((bottom - top) / 2, 2));
                    const perimeter = top + bottom + 2 * side;
                    const diagonal = Math.sqrt(height * height + bottom * bottom); // 近似值
                    
                    return { area, perimeter, diagonal };
                }
            },
            square: {
                name: '正方形',
                description: '计算正方形的面积。输入边长，系统将自动计算面积。',
                formula: 'A = 边长²',
                inputs: [
                    { id: 'side', label: '边长', placeholder: '例如：4', value: 4 }
                ],
                calculate: function(inputs, unit) {
                    const side = inputs.side * unitConversions[unit].toM;
                    
                    const area = side * side;
                    const perimeter = 4 * side;
                    const diagonal = side * Math.sqrt(2);
                    
                    return { area, perimeter, diagonal };
                }
            },
            ellipse: {
                name: '椭圆形',
                description: '计算椭圆形的面积。输入长轴和短轴，系统将自动计算面积。',
                formula: 'A = π × 长半轴 × 短半轴',
                inputs: [
                    { id: 'major', label: '长轴', placeholder: '例如：8', value: 8 },
                    { id: 'minor', label: '短轴', placeholder: '例如：5', value: 5 }
                ],
                calculate: function(inputs, unit) {
                    const major = inputs.major * unitConversions[unit].toM;
                    const minor = inputs.minor * unitConversions[unit].toM;
                    
                    const area = Math.PI * (major / 2) * (minor / 2);
                    // 椭圆周长近似公式
                    const perimeter = Math.PI * (3 * (major/2 + minor/2) - Math.sqrt((3 * major/2 + minor/2) * (major/2 + 3 * minor/2)));
                    const diagonal = Math.sqrt(major * major + minor * minor);
                    
                    return { area, perimeter, diagonal };
                }
            },
            
            // 体积图形
            cuboid: {
                name: '长方体',
                description: '计算长方体的体积。输入长、宽、高，系统将自动计算体积。',
                formula: 'V = 长度 × 宽度 × 高度',
                inputs: [
                    { id: 'length', label: '长度', placeholder: '例如：5', value: 5 },
                    { id: 'width', label: '宽度', placeholder: '例如：3', value: 3 },
                    { id: 'height', label: '高度', placeholder: '例如：2', value: 2 }
                ],
                calculate: function(inputs, unit) {
                    const length = inputs.length * unitConversions[unit].toM;
                    const width = inputs.width * unitConversions[unit].toM;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const volume = length * width * height;
                    const surfaceArea = 2 * (length * width + length * height + width * height);
                    const diagonal = Math.sqrt(length * length + width * width + height * height);
                    
                    return { volume, surfaceArea, diagonal };
                }
            },
            cylinder: {
                name: '圆柱体',
                description: '计算圆柱体的体积。输入底面半径和高，系统将自动计算体积。',
                formula: 'V = π × 半径² × 高',
                inputs: [
                    { id: 'radius', label: '底面半径', placeholder: '例如：3', value: 3 },
                    { id: 'height', label: '高', placeholder: '例如：5', value: 5 }
                ],
                calculate: function(inputs, unit) {
                    const radius = inputs.radius * unitConversions[unit].toM;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const volume = Math.PI * radius * radius * height;
                    const surfaceArea = 2 * Math.PI * radius * (radius + height);
                    const diagonal = Math.sqrt((2 * radius) * (2 * radius) + height * height);
                    
                    return { volume, surfaceArea, diagonal };
                }
            },
            sphere: {
                name: '球体',
                description: '计算球体的体积。输入半径，系统将自动计算体积。',
                formula: 'V = (4/3) × π × 半径³',
                inputs: [
                    { id: 'radius', label: '半径', placeholder: '例如：3', value: 3 }
                ],
                calculate: function(inputs, unit) {
                    const radius = inputs.radius * unitConversions[unit].toM;
                    
                    const volume = (4/3) * Math.PI * Math.pow(radius, 3);
                    const surfaceArea = 4 * Math.PI * radius * radius;
                    const diagonal = 2 * radius; // 直径
                    
                    return { volume, surfaceArea, diagonal };
                }
            },
            cone: {
                name: '圆锥体',
                description: '计算圆锥体的体积。输入底面半径和高，系统将自动计算体积。',
                formula: 'V = (1/3) × π × 半径² × 高',
                inputs: [
                    { id: 'radius', label: '底面半径', placeholder: '例如：3', value: 3 },
                    { id: 'height', label: '高', placeholder: '例如：5', value: 5 }
                ],
                calculate: function(inputs, unit) {
                    const radius = inputs.radius * unitConversions[unit].toM;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const volume = (1/3) * Math.PI * radius * radius * height;
                    const slantHeight = Math.sqrt(radius * radius + height * height);
                    const surfaceArea = Math.PI * radius * (radius + slantHeight);
                    const diagonal = Math.sqrt((2 * radius) * (2 * radius) + height * height);
                    
                    return { volume, surfaceArea, diagonal, slantHeight };
                }
            },
            pyramid: {
                name: '棱锥体',
                description: '计算棱锥体的体积。输入底面边长和高，系统将自动计算体积。',
                formula: 'V = (1/3) × 底面积 × 高',
                inputs: [
                    { id: 'baseSide', label: '底面边长', placeholder: '例如：4', value: 4 },
                    { id: 'height', label: '高', placeholder: '例如：6', value: 6 }
                ],
                calculate: function(inputs, unit) {
                    const baseSide = inputs.baseSide * unitConversions[unit].toM;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const baseArea = baseSide * baseSide; // 假设底面为正方形
                    const volume = (1/3) * baseArea * height;
                    const slantHeight = Math.sqrt(Math.pow(baseSide/2, 2) + height * height);
                    const surfaceArea = baseArea + 4 * (baseSide * slantHeight / 2);
                    const diagonal = Math.sqrt(2 * baseSide * baseSide + height * height);
                    
                    return { volume, surfaceArea, diagonal, slantHeight, baseArea };
                }
            },
            prism: {
                name: '棱柱体',
                description: '计算棱柱体的体积。输入底面积和高，系统将自动计算体积。',
                formula: 'V = 底面积 × 高',
                inputs: [
                    { id: 'baseArea', label: '底面积', placeholder: '例如：12', value: 12 },
                    { id: 'height', label: '高', placeholder: '例如：5', value: 5 }
                ],
                calculate: function(inputs, unit) {
                    // 注意：底面积单位已经是平方米
                    const baseArea = inputs.baseArea * areaUnitConversions.m2.toM2;
                    const height = inputs.height * unitConversions[unit].toM;
                    
                    const volume = baseArea * height;
                    // 简化计算：假设底面为正方形
                    const baseSide = Math.sqrt(baseArea);
                    const surfaceArea = 2 * baseArea + 4 * (baseSide * height);
                    const diagonal = Math.sqrt(2 * baseSide * baseSide + height * height);
                    
                    return { volume, surfaceArea, diagonal };
                }
            }
        };
        
        // 初始化函数
        function init() {
            // 选项卡切换
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新选项卡状态
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 更新内容显示
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId + '-tab').classList.add('active');
                    
                    // 重置选中的图形
                    const firstShape = document.querySelector(`#${tabId}-tab .shape-card`);
                    if (firstShape) {
                        selectShape(firstShape);
                    }
                });
            });
            
            // 图形选择
            document.querySelectorAll('.shape-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectShape(this);
                });
            });
            
            // 房间类型选择
            document.querySelectorAll('.room-type').forEach(room => {
                room.addEventListener('click', function() {
                    document.querySelectorAll('.room-type').forEach(r => r.classList.remove('active'));
                    this.classList.add('active');
                    
                    const roomType = this.getAttribute('data-room');
                    updateRoomCalculator(roomType);
                });
            });
            
            // 计算按钮
            document.getElementById('calculateBtn').addEventListener('click', calculate);
            
            // 输入字段变化时实时计算
            document.getElementById('inputArea').addEventListener('input', function() {
                if (currentShape.type === 'room') {
                    calculateRoom();
                } else {
                    calculate();
                }
            });
            
            // 单位变化时重新计算
            document.getElementById('unit').addEventListener('change', function() {
                if (currentShape.type === 'room') {
                    calculateRoom();
                } else {
                    calculate();
                }
            });
            
            // 主题切换
            initTheme();
            
            // 初始计算
            calculate();
        }
        
        // 选择图形
        function selectShape(element) {
            const type = element.getAttribute('data-type');
            const shape = element.getAttribute('data-shape');
            
            // 更新选中状态
            document.querySelectorAll('.shape-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');
            
            // 更新当前图形
            currentShape.type = type;
            currentShape.shape = shape;
            currentShape.name = shapeConfigs[shape].name;
            currentShape.description = shapeConfigs[shape].description;
            currentShape.formula = shapeConfigs[shape].formula;
            
            // 更新UI
            updateShapeUI();
        }
        
        // 更新图形UI
        function updateShapeUI() {
            // 更新标题和描述
            document.getElementById('currentShape').textContent = currentShape.name + (currentShape.type === 'area' ? '面积计算' : '体积计算');
            document.getElementById('shapeDescription').textContent = currentShape.description;
            document.getElementById('shapeFormula').innerHTML = `<strong>公式：</strong> ${currentShape.formula}`;
            
            // 更新输入字段
            const inputArea = document.getElementById('inputArea');
            inputArea.innerHTML = '';
            
            const config = shapeConfigs[currentShape.shape];
            config.inputs.forEach(input => {
                const group = document.createElement('div');
                group.className = 'input-group';
                group.innerHTML = `
                    <label class="input-label">${input.label} (${document.getElementById('unit').options[document.getElementById('unit').selectedIndex].text})</label>
                    <input type="number" id="${input.id}" class="input-field" placeholder="${input.placeholder}" min="0" step="0.01" value="${input.value}">
                `;
                inputArea.appendChild(group);
            });
            
            // 添加单位选择
            const unitGroup = document.createElement('div');
            unitGroup.className = 'input-group';
            unitGroup.innerHTML = `
                <label class="input-label">单位</label>
                <select id="unit" class="input-field">
                    <option value="m">米 (m)</option>
                    <option value="cm">厘米 (cm)</option>
                    <option value="mm">毫米 (mm)</option>
                    <option value="ft">英尺 (ft)</option>
                    <option value="in">英寸 (in)</option>
                </select>
            `;
            inputArea.appendChild(unitGroup);
            
            // 重新绑定事件
            document.getElementById('unit').addEventListener('change', function() {
                calculate();
            });
            
            // 更新图形预览
            updateShapeDiagram();
            
            // 重新计算
            calculate();
        }
        
        // 更新房间计算器
        function updateRoomCalculator(roomType) {
            currentShape.type = 'room';
            currentShape.shape = roomType;
            
            let title, description, formula;
            const inputArea = document.getElementById('inputArea');
            
            switch(roomType) {
                case 'simple':
                    title = '简单房间面积计算';
                    description = '计算矩形房间的面积，可以扣除门窗面积。';
                    formula = '房间面积 = 长 × 宽 - 门窗面积';
                    
                    inputArea.innerHTML = `
                        <div class="input-group">
                            <label class="input-label">房间长度</label>
                            <input type="number" id="roomLength" class="input-field" placeholder="例如：5" min="0" step="0.01" value="5">
                        </div>
                        <div class="input-group">
                            <label class="input-label">房间宽度</label>
                            <input type="number" id="roomWidth" class="input-field" placeholder="例如：4" min="0" step="0.01" value="4">
                        </div>
                        <div class="input-group">
                            <label class="input-label">门数量</label>
                            <input type="number" id="doorCount" class="input-field" placeholder="例如：2" min="0" value="2">
                        </div>
                        <div class="input-group">
                            <label class="input-label">窗数量</label>
                            <input type="number" id="windowCount" class="input-field" placeholder="例如：3" min="0" value="3">
                        </div>
                        <div class="input-group">
                            <label class="input-label">单位</label>
                            <select id="unit" class="input-field">
                                <option value="m">米 (m)</option>
                                <option value="cm">厘米 (cm)</option>
                                <option value="mm">毫米 (mm)</option>
                                <option value="ft">英尺 (ft)</option>
                                <option value="in">英寸 (in)</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'lshape':
                    title = 'L形房间面积计算';
                    description = '计算L形不规则房间的面积。';
                    formula = '总面积 = 矩形A面积 + 矩形B面积';
                    
                    inputArea.innerHTML = `
                        <div class="input-group">
                            <label class="input-label">长边长度</label>
                            <input type="number" id="longLength" class="input-field" placeholder="例如：8" min="0" step="0.01" value="8">
                        </div>
                        <div class="input-group">
                            <label class="input-label">短边长度</label>
                            <input type="number" id="shortLength" class="input-field" placeholder="例如：5" min="0" step="0.01" value="5">
                        </div>
                        <div class="input-group">
                            <label class="input-label">宽度</label>
                            <input type="number" id="lWidth" class="input-field" placeholder="例如：4" min="0" step="0.01" value="4">
                        </div>
                        <div class="input-group">
                            <label class="input-label">突出部分长度</label>
                            <input type="number" id="protrusion" class="input-field" placeholder="例如：3" min="0" step="0.01" value="3">
                        </div>
                        <div class="input-group">
                            <label class="input-label">突出部分宽度</label>
                            <input type="number" id="protrusionWidth" class="input-field" placeholder="例如：2" min="0" step="0.01" value="2">
                        </div>
                        <div class="input-group">
                            <label class="input-label">单位</label>
                            <select id="unit" class="input-field">
                                <option value="m">米 (m)</option>
                                <option value="cm">厘米 (cm)</option>
                                <option value="mm">毫米 (mm)</option>
                                <option value="ft">英尺 (ft)</option>
                                <option value="in">英寸 (in)</option>
                            </select>
                        </div>
                    `;
                    break;
                    
                case 'volume':
                    title = '房间体积计算';
                    description = '计算房间的体积，用于空调容量、空气流通等计算。';
                    formula = '房间体积 = 长 × 宽 × 高';
                    
                    inputArea.innerHTML = `
                        <div class="input-group">
                            <label class="input-label">房间长度</label>
                            <input type="number" id="volumeLength" class="input-field" placeholder="例如：5" min="0" step="0.01" value="5">
                        </div>
                        <div class="input-group">
                            <label class="input-label">房间宽度</label>
                            <input type="number" id="volumeWidth" class="input-field" placeholder="例如：4" min="0" step="0.01" value="4">
                        </div>
                        <div class="input-group">
                            <label class="input-label">房间高度</label>
                            <input type="number" id="roomHeight" class="input-field" placeholder="例如：2.8" min="0" step="0.01" value="2.8">
                        </div>
                        <div class="input-group">
                            <label class="input-label">单位</label>
                            <select id="unit" class="input-field">
                                <option value="m">米 (m)</option>
                                <option value="cm">厘米 (cm)</option>
                                <option value="mm">毫米 (mm)</option>
                                <option value="ft">英尺 (ft)</option>
                                <option value="in">英寸 (in)</option>
                            </select>
                        </div>
                    `;
                    break;
            }
            
            // 更新UI
            document.getElementById('currentShape').textContent = title;
            document.getElementById('shapeDescription').textContent = description;
            document.getElementById('shapeFormula').innerHTML = `<strong>公式：</strong> ${formula}`;
            
            // 重新绑定事件
            document.getElementById('unit').addEventListener('change', function() {
                calculateRoom();
            });
            
            // 计算房间
            calculateRoom();
        }
        
        // 计算标准图形
        function calculate() {
            if (currentShape.type === 'room') {
                calculateRoom();
                return;
            }
            
            const config = shapeConfigs[currentShape.shape];
            const inputs = {};
            const unit = document.getElementById('unit').value;
            
            // 收集输入值
            config.inputs.forEach(input => {
                const value = parseFloat(document.getElementById(input.id).value) || 0;
                inputs[input.id] = value;
            });
            
            // 计算
            const result = config.calculate(inputs, unit);
            
            // 显示结果
            displayResult(result, unit);
        }
        
        // 计算房间
        function calculateRoom() {
            const unit = document.getElementById('unit').value;
            const unitName = unitConversions[unit].name;
            let result = {};
            
            switch(currentShape.shape) {
                case 'simple':
                    const roomLength = (parseFloat(document.getElementById('roomLength').value) || 0) * unitConversions[unit].toM;
                    const roomWidth = (parseFloat(document.getElementById('roomWidth').value) || 0) * unitConversions[unit].toM;
                    const doorCount = parseInt(document.getElementById('doorCount').value) || 0;
                    const windowCount = parseInt(document.getElementById('windowCount').value) || 0;
                    
                    // 标准门面积：2m²，标准窗面积：1.5m²
                    const doorArea = doorCount * 2;
                    const windowArea = windowCount * 1.5;
                    
                    const totalArea = roomLength * roomWidth;
                    const netArea = totalArea - doorArea - windowArea;
                    
                    result = {
                        area: netArea,
                        totalArea: totalArea,
                        doorArea: doorArea,
                        windowArea: windowArea,
                        perimeter: 2 * (roomLength + roomWidth)
                    };
                    break;
                    
                case 'lshape':
                    const longLength = (parseFloat(document.getElementById('longLength').value) || 0) * unitConversions[unit].toM;
                    const shortLength = (parseFloat(document.getElementById('shortLength').value) || 0) * unitConversions[unit].toM;
                    const lWidth = (parseFloat(document.getElementById('lWidth').value) || 0) * unitConversions[unit].toM;
                    const protrusion = (parseFloat(document.getElementById('protrusion').value) || 0) * unitConversions[unit].toM;
                    const protrusionWidth = (parseFloat(document.getElementById('protrusionWidth').value) || 0) * unitConversions[unit].toM;
                    
                    const mainArea = longLength * lWidth;
                    const extensionArea = protrusion * protrusionWidth;
                    const totalLArea = mainArea + extensionArea;
                    
                    result = {
                        area: totalLArea,
                        mainArea: mainArea,
                        extensionArea: extensionArea,
                        perimeter: 2 * (longLength + lWidth) + 2 * (protrusion + protrusionWidth) - 2 * Math.min(lWidth, protrusionWidth)
                    };
                    break;
                    
                case 'volume':
                    const volumeLength = (parseFloat(document.getElementById('volumeLength').value) || 0) * unitConversions[unit].toM;
                    const volumeWidth = (parseFloat(document.getElementById('volumeWidth').value) || 0) * unitConversions[unit].toM;
                    const roomHeight = (parseFloat(document.getElementById('roomHeight').value) || 0) * unitConversions[unit].toM;
                    
                    const volume = volumeLength * volumeWidth * roomHeight;
                    const floorArea = volumeLength * volumeWidth;
                    const wallArea = 2 * (volumeLength + volumeWidth) * roomHeight;
                    
                    result = {
                        volume: volume,
                        floorArea: floorArea,
                        wallArea: wallArea,
                        surfaceArea: 2 * floorArea + wallArea
                    };
                    break;
            }
            
            // 显示房间计算结果
            displayRoomResult(result, unit);
        }
        
        // 显示标准图形结果
        function displayResult(result, unit) {
            const unitName = unitConversions[unit].name;
            
            if (currentShape.type === 'area') {
                document.getElementById('areaResult').textContent = `${result.area.toFixed(2)} 平方米`;
                document.getElementById('perimeterResult').textContent = `${result.perimeter.toFixed(2)} ${unitName}`;
                document.getElementById('diagonalResult').textContent = `${result.diagonal.toFixed(2)} ${unitName}`;
                
                // 单位换算
                document.getElementById('cm2Result').textContent = `${(result.area * 10000).toFixed(2)} cm²`;
                document.getElementById('mm2Result').textContent = `${(result.area * 1000000).toFixed(2)} mm²`;
                document.getElementById('ft2Result').textContent = `${(result.area * 10.7639).toFixed(2)} ft²`;
                
                // 更新结果区域标题
                document.querySelector('#resultSection .result-title').innerHTML = '<i class="fas fa-chart-bar"></i> 面积计算结果';
                document.getElementById('unitConversion').style.display = 'block';
            } else if (currentShape.type === 'volume') {
                document.getElementById('areaResult').textContent = `${result.volume.toFixed(2)} 立方米`;
                document.getElementById('perimeterResult').textContent = `${result.surfaceArea.toFixed(2)} 平方米`;
                document.getElementById('diagonalResult').textContent = `${result.diagonal.toFixed(2)} ${unitName}`;
                
                // 单位换算
                document.getElementById('cm2Result').textContent = `${(result.volume * 1000000).toFixed(2)} cm³`;
                document.getElementById('mm2Result').textContent = `${(result.volume * 1000000000).toFixed(2)} mm³`;
                document.getElementById('ft2Result').textContent = `${(result.volume * 35.3147).toFixed(2)} ft³`;
                
                // 更新结果区域标题
                document.querySelector('#resultSection .result-title').innerHTML = '<i class="fas fa-chart-bar"></i> 体积计算结果';
                document.getElementById('unitConversion').style.display = 'block';
            }
        }
        
        // 显示房间计算结果
        function displayRoomResult(result, unit) {
            const unitName = unitConversions[unit].name;
            
            switch(currentShape.shape) {
                case 'simple':
                    document.getElementById('areaResult').textContent = `${result.area.toFixed(2)} 平方米`;
                    document.getElementById('perimeterResult').textContent = `${result.totalArea.toFixed(2)} 平方米`;
                    document.getElementById('diagonalResult').textContent = `${result.perimeter.toFixed(2)} ${unitName}`;
                    
                    // 更新单位换算区域
                    document.getElementById('cm2Result').textContent = `门面积: ${result.doorArea.toFixed(2)} m²`;
                    document.getElementById('mm2Result').textContent = `窗面积: ${result.windowArea.toFixed(2)} m²`;
                    document.getElementById('ft2Result').textContent = `总面积: ${result.totalArea.toFixed(2)} m²`;
                    
                    document.querySelector('#resultSection .result-title').innerHTML = '<i class="fas fa-chart-bar"></i> 房间面积计算结果';
                    document.getElementById('unitConversion').style.display = 'block';
                    break;
                    
                case 'lshape':
                    document.getElementById('areaResult').textContent = `${result.area.toFixed(2)} 平方米`;
                    document.getElementById('perimeterResult').textContent = `${result.mainArea.toFixed(2)} 平方米`;
                    document.getElementById('diagonalResult').textContent = `${result.extensionArea.toFixed(2)} 平方米`;
                    
                    document.getElementById('cm2Result').textContent = `主区域: ${result.mainArea.toFixed(2)} m²`;
                    document.getElementById('mm2Result').textContent = `突出区域: ${result.extensionArea.toFixed(2)} m²`;
                    document.getElementById('ft2Result').textContent = `周长: ${result.perimeter.toFixed(2)} ${unitName}`;
                    
                    document.querySelector('#resultSection .result-title').innerHTML = '<i class="fas fa-chart-bar"></i> L形房间计算结果';
                    document.getElementById('unitConversion').style.display = 'block';
                    break;
                    
                case 'volume':
                    document.getElementById('areaResult').textContent = `${result.volume.toFixed(2)} 立方米`;
                    document.getElementById('perimeterResult').textContent = `${result.floorArea.toFixed(2)} 平方米`;
                    document.getElementById('diagonalResult').textContent = `${result.wallArea.toFixed(2)} 平方米`;
                    
                    document.getElementById('cm2Result').textContent = `${(result.volume * 1000).toFixed(2)} 升`;
                    document.getElementById('mm2Result').textContent = `${(result.volume * 35.3147).toFixed(2)} ft³`;
                    document.getElementById('ft2Result').textContent = `${result.surfaceArea.toFixed(2)} 总表面积 m²`;
                    
                    document.querySelector('#resultSection .result-title').innerHTML = '<i class="fas fa-chart-bar"></i> 房间体积计算结果';
                    document.getElementById('unitConversion').style.display = 'block';
                    break;
            }
        }
        
        // 更新图形示意图
        function updateShapeDiagram() {
            const svg = document.getElementById('shapeSVG');
            svg.innerHTML = '';
            
            switch(currentShape.shape) {
                case 'rectangle':
                    svg.setAttribute('viewBox', '0 0 200 150');
                    svg.innerHTML = `
                        <rect x="30" y="30" width="140" height="90" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                        <text x="100" y="30" text-anchor="middle" dy="-10" fill="var(--text-secondary)" font-size="12">长度</text>
                        <text x="180" y="75" text-anchor="middle" fill="var(--text-secondary)" font-size="12">宽度</text>
                        <line x1="30" y1="30" x2="170" y2="30" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                        <line x1="170" y1="30" x2="170" y2="120" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                    `;
                    break;
                    
                case 'triangle':
                    svg.setAttribute('viewBox', '0 0 200 150');
                    svg.innerHTML = `
                        <polygon points="50,120 150,120 100,30" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                        <text x="100" y="125" text-anchor="middle" dy="15" fill="var(--text-secondary)" font-size="12">底边</text>
                        <text x="115" y="75" text-anchor="middle" dy="-20" fill="var(--text-secondary)" font-size="12">高</text>
                        <line x1="50" y1="120" x2="150" y2="120" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                        <line x1="100" y1="30" x2="100" y2="120" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                    `;
                    break;
                    
                case 'circle':
                    svg.setAttribute('viewBox', '0 0 200 150');
                    svg.innerHTML = `
                        <circle cx="100" cy="75" r="60" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                        <text x="100" y="75" text-anchor="middle" dy="-70" fill="var(--text-secondary)" font-size="12">半径</text>
                        <line x1="100" y1="75" x2="160" y2="75" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                    `;
                    break;
                    
                case 'cuboid':
                    svg.setAttribute('viewBox', '0 0 200 150');
                    svg.innerHTML = `
                        <!-- 长方体正面 -->
                        <rect x="50" y="40" width="100" height="70" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                        <!-- 长方体顶面 -->
                        <polygon points="50,40 70,20 170,20 150,40" fill="var(--primary)" fill-opacity="0.1" stroke="var(--primary)" stroke-width="1"/>
                        <!-- 长方体侧面 -->
                        <polygon points="150,40 170,20 170,90 150,110" fill="var(--primary)" fill-opacity="0.15" stroke="var(--primary)" stroke-width="1"/>
                        <text x="100" y="55" text-anchor="middle" dy="-20" fill="var(--text-secondary)" font-size="10">长度</text>
                        <text x="160" y="75" text-anchor="middle" fill="var(--text-secondary)" font-size="10">宽度</text>
                        <text x="130" y="110" text-anchor="middle" dy="15" fill="var(--text-secondary)" font-size="10">高度</text>
                        <line x1="50" y1="40" x2="150" y2="40" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                        <line x1="150" y1="40" x2="150" y2="110" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                        <line x1="150" y1="110" x2="50" y2="110" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                    `;
                    break;
                    
                case 'cylinder':
                    svg.setAttribute('viewBox', '0 0 200 150');
                    svg.innerHTML = `
                        <!-- 圆柱体侧面 -->
                        <ellipse cx="100" cy="40" rx="60" ry="15" fill="var(--primary)" fill-opacity="0.1" stroke="var(--primary)" stroke-width="1"/>
                        <rect x="40" y="40" width="120" height="70" fill="var(--primary)" fill-opacity="0.1" stroke="var(--primary)" stroke-width="1"/>
                        <ellipse cx="100" cy="110" rx="60" ry="15" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                        <text x="100" y="75" text-anchor="middle" dy="-40" fill="var(--text-secondary)" font-size="10">半径</text>
                        <text x="160" y="75" text-anchor="middle" fill="var(--text-secondary)" font-size="10">高</text>
                        <line x1="100" y1="40" x2="160" y2="40" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                        <line x1="160" y1="40" x2="160" y2="110" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="5,5"/>
                    `;
                    break;
                    
                default:
                    svg.setAttribute('viewBox', '0 0 200 150');
                    svg.innerHTML = `
                        <rect x="30" y="30" width="140" height="90" fill="var(--primary)" fill-opacity="0.2" stroke="var(--primary)" stroke-width="2"/>
                        <text x="100" y="75" text-anchor="middle" fill="var(--text-secondary)" font-size="14">${currentShape.name}</text>
                    `;
            }
        }
        
        // 主题切换
        function initTheme() {
            const themeBtn = document.querySelector('.theme-btn');
            
            // 检查本地存储的主题设置
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
            
            // 切换主题函数
            function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                // 更新图标
                if (themeBtn) {
                    const icon = themeBtn.querySelector('i');
                    icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                }
            }
            
            // 添加事件监听
            if (themeBtn) themeBtn.addEventListener('click', toggleTheme);
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
    
    <style>
        /* 形状网格 */
        .shape-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        @media (min-width: 640px) {
            .shape-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .shape-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.25rem 0.75rem;
            border-radius: var(--radius);
            border: 1px solid var(--border-light);
            background-color: var(--bg-primary);
            cursor: pointer;
            transition: all var(--transition);
            text-align: center;
        }
        
        .shape-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .shape-card.active {
            border-color: var(--primary);
            background-color: var(--primary-light);
        }
        
        .shape-icon {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .shape-name {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        /* 选项卡内容 */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 房间类型选项 */
        .room-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .room-type {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: var(--radius);
            border: 1px solid var(--border-light);
            background-color: var(--bg-primary);
            cursor: pointer;
            transition: all var(--transition);
        }
        
        .room-type:hover {
            border-color: var(--primary);
        }
        
        .room-type.active {
            border-color: var(--primary);
            background-color: var(--primary-light);
        }
        
        .room-type-icon {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--primary);
            margin-right: 1rem;
        }
        
        .room-type-content h4 {
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }
        
        .room-type-content p {
            margin-bottom: 0;
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }
        
        /* 图形预览 */
        .shape-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            border-radius: var(--radius);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-light);
        }
        
        .shape-diagram {
            margin-bottom: 1rem;
        }
        
        .shape-formula {
            padding: 0.75rem 1rem;
            background-color: var(--bg-primary);
            border-radius: var(--radius);
            border: 1px solid var(--border-light);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        /* 参考卡片 */
        .reference-card {
            padding: 1.5rem;
            border-radius: var(--radius);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-light);
        }
        
        /* 响应式调整 */
        @media (max-width: 1023px) {
            .calculator-layout {
                flex-direction: column;
            }
            
            .calculator-sidebar {
                margin-bottom: 1.5rem;
            }
        }
    </style>
</body>
</html>
